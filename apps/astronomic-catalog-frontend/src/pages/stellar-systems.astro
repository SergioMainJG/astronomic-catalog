
import Layout from '../layouts/Layout.astro';
import type { StarSystem } from '../types';

let systems: StarSystem[] = [];
try {
  const response = await fetch('http://localhost:3000/stellar-systems');
  if (response.ok) {
    systems = await response.json();
  }
} catch (e) {
  console.error('Failed to fetch stellar systems', e);
}
---

<Layout title="Astronomic Catalog - Stellar Systems">
	<div class="space-y-8">
		<header>
			<h1 class="text-3xl font-bold text-white">Stellar Systems</h1>
			<p class="text-slate-400">Groups of stars bound by gravity.</p>
		</header>

		<div class="grid gap-6">
			{systems.map((system) => (
				<div class="bg-slate-800 rounded-lg p-6 border border-slate-700 flex flex-col md:flex-row md:items-center justify-between">
					<div>
						<h2 class="text-2xl font-bold text-white mb-1">{system.name}</h2>
						<p class="text-slate-400">
							Neighborhood: <span class="text-blue-400">{system.neighborhood?.name || 'Unknown'}</span>
						</p>
					</div>
					<div class="mt-4 md:mt-0 flex items-center bg-slate-900 rounded-lg px-4 py-3 border border-slate-700">
						<div class="text-center">
							<span class="block text-2xl font-bold text-white">{system.stars?.length || 0}</span>
							<span class="text-xs text-slate-500 uppercase tracking-wider">Stars</span>
						</div>
					</div>
				</div>
			))}
		</div>
	</div>
</Layout>
